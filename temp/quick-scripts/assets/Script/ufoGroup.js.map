{"version":3,"sources":["ufoGroup.js"],"names":["ufoG","cc","Class","name","properties","freqTime","prefab","Prefab","initPoolCount","minDelay","default","tooltip","maxDelay","extends","Component","type","onLoad","eState","D","commonInfo","gameState","none","common","batchInitObjPool","startAction","start","ui","length","fName","e","randNewUfo","bind","schedule","ufoInfo","delay","Math","random","scheduleOnce","getNewUfo","poolName","newNode","genNewNode","node","newV2","getNewUfoPositon","setPosition","newUfo","randx","randomMinus1To1","parent","width","randy","height","v2","resumeAction","enabled","pauseAction","pause","ufoDied","nodeinfo","backObjPool"],"mappings":"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","file":"ufoGroup.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\n//ufo组\nvar ufoG = cc.Class({\n    name:'ufoG', \n    properties: {\n        name:'',\n        freqTime:0,\n        prefab:cc.Prefab,\n        initPoolCount:0,\n        minDelay:{\n            default:0,\n            tooltip: '最小延迟',\n        },\n        maxDelay:{\n            default:0,\n            tooltip: '最大延迟',\n        },\n    }\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        ufoG: {\n            default:[],\n            type: ufoG\n        },\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.eState = D.commonInfo.gameState.none;\n        //console.log(this.ufoG);\n        D.common.batchInitObjPool(this,this.ufoG);        \n        \n    },\n    startAction(){\n        // ufo \n        this.eState = D.commonInfo.gameState.start;\n        //定时生成敌机\n        for (var ui=0; ui< this.ufoG.length; ++ui){\n            var freqTime = this.ufoG[ui].freqTime;\n            var fName = 'callback_'+ui;\n            this[fName] = function(e){ this.randNewUfo(this.ufoG[e]); }.bind(this, ui);\n            this.schedule(this[fName], freqTime);\n        }\n    },\n    //随机时间生成敌机\n    randNewUfo: function(ufoInfo){\n        var delay = Math.random()*(ufoInfo.maxDelay-ufoInfo.minDelay) + ufoInfo.minDelay;\n        this.scheduleOnce(function(e) {this.getNewUfo(e);}.bind(this, ufoInfo), delay);\n    },\n    //生成敌机\n    getNewUfo: function(ufoInfo) {\n        var poolName = ufoInfo.name + 'Pool';\n        var newNode = D.common.genNewNode(this[poolName],ufoInfo.prefab,this.node);\n        var newV2 = this.getNewUfoPositon(newNode);\n        newNode.setPosition(newV2);\n    },\n    //敌机随机生成的位置\n    getNewUfoPositon: function(newUfo) {\n        //位于上方，先不可见\n        var randx = cc.randomMinus1To1()*(this.node.parent.width/2-newUfo.width/2);\n        var randy = this.node.parent.height/2+newUfo.height/2;\n        return cc.v2(randx,randy);\n    },\n    //重新开始\n    resumeAction: function(){\n        this.enabled = true;\n        this.eState = D.commonInfo.gameState.start;\n    },\n    //暂停\n    pauseAction: function(){\n        this.enabled = false;\n        this.eState = D.commonInfo.gameState.pause;\n        \n    },\n    ufoDied: function(nodeinfo){\n        //回收节点\n        D.common.backObjPool(this,nodeinfo);\n    },\n});\n"]}