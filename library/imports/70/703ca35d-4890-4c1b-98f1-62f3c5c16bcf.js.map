{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\enemyGroup.js"],"names":["enemyG","cc","Class","name","properties","freqTime","initPollCount","prefab","Prefab","extends","Component","default","type","main","require","onLoad","eState","D","commonInfo","gameState","none","common","batchInitObjPool","startAction","start","ei","length","fName","e","getNewEnemy","bind","schedule","resumeAction","enabled","pauseAction","pause","enemyInfo","poolName","newNode","genNewNode","node","newV2","getNewEnemyPositon","setPosition","getComponent","init","newEnemy","randx","randomMinus1To1","parent","width","randy","height","v2","enemyDied","nodeinfo","score","backObjPool","parseInt","gainScore","getScore"],"mappings":"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","file":"enemyGroup.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\n//敌机组\nvar enemyG = cc.Class({\n    name:'enemyG',\n    properties: {\n        name:'',\n        freqTime:0,\n        initPollCount:0,\n        prefab:cc.Prefab\n    }\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties:()=>({\n        enemyG: {\n            default:[],\n            type: enemyG\n        },\n        main: {\n            default: null,\n            type: require('main'),\n        },\n    }),\n    \n    // use this for initialization\n    onLoad: function () { \n        //初始化敌机组\n        this.eState = D.commonInfo.gameState.none;\n        D.common.batchInitObjPool(this,this.enemyG);\n    },\n    startAction: function(){\n        \n        this.eState = D.commonInfo.gameState.start;\n        //定时生成敌机\n        for (var ei=0; ei< this.enemyG.length; ++ei){\n            var freqTime = this.enemyG[ei].freqTime;\n            var fName = 'callback_'+ei;\n            this[fName] = function(e){ this.getNewEnemy(this.enemyG[e]); }.bind(this, ei);\n            this.schedule(this[fName], freqTime);\n        }\n    },\n    //重新开始\n    resumeAction: function(){\n        this.enabled = true;\n        this.eState = D.commonInfo.gameState.start;\n    },\n    //暂停\n    pauseAction: function(){\n        this.enabled = false;\n        this.eState = D.commonInfo.gameState.pause;\n        \n    },\n    //生成敌机\n    getNewEnemy: function(enemyInfo) {\n        var poolName = enemyInfo.name + 'Pool';\n        var newNode = D.common.genNewNode(this[poolName],enemyInfo.prefab,this.node);\n        var newV2 = this.getNewEnemyPositon(newNode);\n        newNode.setPosition(newV2);\n        newNode.getComponent('enemy').init();\n    },\n    //敌机随机生成的位置\n    getNewEnemyPositon: function(newEnemy) {\n        //位于上方，先不可见\n        var randx = cc.randomMinus1To1()*(this.node.parent.width/2-newEnemy.width/2);\n        var randy = this.node.parent.height/2+newEnemy.height/2;\n        return cc.v2(randx,randy);\n    },\n    enemyDied: function(nodeinfo,score){\n        //回收节点\n        D.common.backObjPool(this,nodeinfo);\n        //增加分数\n        if (parseInt(score)>0){\n            this.main.gainScore(score);\n        }  \n    },\n    getScore: function(){\n        return this.main.getScore();\n    },\n    // called every frame, uncomment this function to activate update callback\n    //update: function (dt) {\n        \n    //},\n    \n});\n"]}